# DEP API AUTHENTICATION:

This project provides an implementation of the authentication mechanism needed to interact with the DEP platform. Two jars are generated by this project of which one is a thin jar. It is up to the user to decide which jar is suited for their needs.

## Development:

This project was created using the Eclipse IDE and uses a Maven build.  
This project makes use of the lombok jar.
 
## Prerequisites

To build you will need Git and JDK 8 or later.
Ensure that you install Lombok for Eclipse when importing the project.

## Running the tests

The tests can be located under "src/test/java".
To run the tests, right click the "DEPAuthenticationTest.java" file and choose "Run As" -> "JUNIT TEST"

## Built With

Maven - Dependency Management

## Example:

The following code is a partial implementation, showing the important parts of how to use the classes:
```java
import java.time.ZonedDateTime;

import org.springframework.http.HttpHeaders;

import com.mtn.dep.Authentication;
import com.mtn.dep.AuthenticationHeaders;
import com.mtn.dep.service.DEPAuthentication;
import com.mtn.dep.service.DEPValidationException;
import com.mtn.dep.service.HttpMethod;

public class ExampleImplementation {

	public static void main(String[] args) {
		try {
			Authentication depAuthentication = DEPAuthentication.builder()
					.accessKey("exampleKey") // The provided access key
					.accessSecret("exampleSecret") // The provided access secret
					.requestPath("/examplePath") // e.g: /subscription
					.httpMethod(HttpMethod.POST) // options: POST, PUT, DELETE, PATCH, GET
					.body("<json-body-here>")
					.timestamp(ZonedDateTime.now())
					.hostName("host:api.dep.mtn.co.za") // The provided hostName
					.build();
			
			AuthenticationHeaders authenticationHeaders = depAuthentication.createAuthenticationHeaders();
			
			HttpHeaders headers = new HttpHeaders();
			
			headers.add("Authorization", authenticationHeaders.getAuthorizationString());
			headers.add("Accept", "application/vnd.sdp+json;version=1.4");
			headers.add("Content-Type", "application/json");
			headers.add("X-Amz-Date", authenticationHeaders.getXAmzDate());
			headers.add("x-api-key", "<your x-api-key supplied by MTN>");
			
			//Use the "headers" object as part of the REST call.
			
			String jsonBody = depAuthentication.getJsonBody(); // Convenience method to get the orginal JSON text.
			String queryString = depAuthentication.getRequestQueryString(); // Convenience method to return a query string alphabetically sorted by key.
			
			//Use the "jsonBody" and "queryString" as part of the REST call being made.
			
		} catch (DEPValidationException e) {
			// Handle errors
		}
	}

}
```
	